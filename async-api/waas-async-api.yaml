asyncapi: 2.3.0
info:
  title: Profee WAAS Notificatioins API
  version: '1.0'
  description: The following notifications will be sent to partner system. Please provide us with URLs which will be responsible in every notification.
channels:
  card/authorization:
    publish:
      message:
        $ref: '#/components/messages/CardOperationNotificationDto'
components:
  messages:
    CardOperationNotificationDto:
      payload:
        type: object
        properties:
          cardId:
            type: string
            description: Card ID
          walletId:
            type: string
            description: Wallet ID
          notification:
            type: object
            description: Notification about card operation authorization
            properties:
              uuid:
                type: string
                description: Universally unique identifier, which is set for the payment
              status:
                type: string
                description: Payment status to indicate whether authorization is successful, pending or failed
              type:
                type: object
                description: The detailed transaction type
                properties:
                  code:
                    type: string
                    description: The code used to identify the transaction type
                  direction:
                    type: string
                    description: The direction of funds, which can be crediting or withdrawal ("DEBIT" or "CREDIT")
                  description:
                    type: string
                    description: The description provided for the specified transaction type
              mcc:
                type: number
                description: Merchant category code for the operation
              authDate:
                type: string
                format: date
                description: Authorization date for the operation
              authTime:
                type: string
                format: time
                description: Authorization time for the operation
              postingDate:
                type: string
                description: Posting date for the operation
              authCode:
                type: string
                description: Authorization code for the operation
              rrn:
                type: number
                description: Retrieval reference number, which is provided by the acquiring bank
              merchantId:
                type: number
                description: The identifier of the merchant
              terminalId:
                type: number
                description: The identifier of the terminal
              merchantName:
                type: string
                description: The name of the merchant
              merchantCity:
                type: string
                description: The city or location of the merchant
                example: VISA DIRECT
              merchantSum:
                type: object
                description: The parameters of the payment on the merchant side
                properties:
                  amount:
                    type: number
                    description: The amount of the payment on the merchant side, can be null
                  currency:
                    type: string
                    description: The currency on the merchant side, which is represented in alpha codes ISO 4217
              cardSum:
                type: object
                description: The parameters of the payment on the card side
                properties:
                  amount:
                    type: number
                    description: The amount of the payment on the card side, can be null
                  currency:
                    type: string
                    description: The currency on the card side, which is represented in alpha codes ISO 4217
              authDescription:
                type: string
                description: A description to elaborate on the status of the operation
                example: Approved by Issuer
              otb:
                type: number
                description: Card balance after the transaction (with authorization)
